# Configuration for Spin applications

A _Spin application_ is a collection of at least one _component_, each
instantiated as a result of an _event_ generated by a _trigger_.

In the example below we can see a simple application with a single component,
executed when the `/hello` endpoint is accessed:

```toml
name        = "hello-spin"
version     = "1.0.0"

[[component]]
    name    = "hello"
    path    = "/hello"
    trigger = "fermyon/http/0.1.0"
    path    = "path/to/wasm/file.wasm"
```

Each component handles exactly one trigger type, and contains exactly one
implementation for such a trigger.

## The `spin.toml` configuration file

Currently, the only configuration file for a Spin application is the `spin.toml`
file. This might change in the future (it could potentially be generated from
multiple configuration sources), as this file currently mixes build- and
run-time concerns.

These are the fields currently supported for the configuration:

- `name` (REQUIRED): Name of the application.
- `version` (REQUIRED): Version of the application.
- `description` (OPTIONAL): Description of the application.
- `authors` (OPTIONAL): Authors of the application.
- `component` (REQUIRED): List with the components of the application.

Each `component` object has the following fields:

- `name` (REQUIRED): Name of the component. Used at runtime to select between
  multiple components of the same application.
- `path` (OPTIONAL): Path (relative to the configuration file) of the main Wasm
  module for the current component. Only used when packaging the application.
- `reference` (OPTIONAL): Reference to a component from the registry. Either a
  `path` or a `reference` must be specified (TODO).
- `trigger` (REQUIRED): Trigger for the component. (TODO: should there be a
  trigger-defined custom section?).
- `route` (OPTIONAL): Route the component will be triggered for in case of an
  HTTP component.
- `files` (OPTIONAL): Paths (relative to the configuration file) of files to be
  mapped inside the Wasm module at runtime.
- `allowed_http_hosts` (OPTIONAL): List of HTTP hosts the component is allowed
  to connect to.
- `dependencies` (OPTIONAL): List of dependencies to be resolved and satisfied
  at runtime by the host.

Each entry in the `dependencies` table should correspond to exactly one import
module from the Wasm module. Currently, this map should either contain an
interface that should be satisfied by the host runtime (through a host
implementation), or an exact reference (_not_ a version range or constraint) to
a component from the registry. The fields in a dependency section are:

- `type` (REQUIRED): The type of the dependency. Possible values: `host` or
  `component`.
- `reference` (OPTIONAL): Reference to a component from the registry. Required
  if `type` is `component`.

## Glossary

- WebAssembly module (or "module") — compilation artifact targeting
  `wasm32-wasi` that adheres to
  [the Wasm specification](https://webassembly.org/specs/).

- WebAssembly component (or "component") — compilation artifact targeting
  `wasm32-wasi` that adheres to
  [the WebAssembly component model](https://github.com/WebAssembly/component-model/blob/main/design/high-level/Goals.md),
  and whose imports and exports use
  [interface types](https://github.com/WebAssembly/interface-types)
